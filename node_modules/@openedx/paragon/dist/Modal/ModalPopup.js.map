{"version":3,"file":"ModalPopup.js","names":["React","PropTypes","FocusOn","Portal","PopperElement","ModalContextProvider","PLACEMENT_OFFSETS","right","left","ModalPopup","_ref","children","onClose","isOpen","positionRef","isBlocking","withPortal","placement","hasArrow","popperProps","RootComponent","Fragment","placementOffsetValue","popperParams","name","options","scroll","offset","handleOnClickOutside","e","type","createElement","modifiers","target","scrollLock","enabled","onEscapeKey","onClickOutside","className","id","propTypes","node","isRequired","func","bool","oneOfType","shape","current","defaultProps"],"sources":["../../src/Modal/ModalPopup.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FocusOn } from 'react-focus-on';\nimport Portal from './Portal';\nimport PopperElement from './PopperElement';\nimport { ModalContextProvider } from './ModalContext';\n\nconst PLACEMENT_OFFSETS = { right: [-2, 10], left: [-2, 10] };\n\nfunction ModalPopup({\n  children,\n  onClose,\n  isOpen,\n  positionRef,\n  isBlocking,\n  withPortal,\n  placement,\n  hasArrow,\n  ...popperProps\n}) {\n  const RootComponent = withPortal ? Portal : React.Fragment;\n  const placementOffsetValue = PLACEMENT_OFFSETS[placement] || [0, 10];\n\n  const popperParams = [\n    {\n      name: 'eventListeners',\n      options: { scroll: false },\n    },\n    {\n      name: 'offset',\n      options: {\n        offset: () => placementOffsetValue,\n      },\n    },\n  ];\n\n  const handleOnClickOutside = (e) => {\n    if (e.type === 'touchstart') {\n      return;\n    }\n\n    onClose();\n  };\n\n  return (\n    <ModalContextProvider onClose={onClose} isOpen={isOpen} isBlocking={isBlocking}>\n      <RootComponent>\n        <PopperElement\n          modifiers={hasArrow ? popperParams : null}\n          target={positionRef}\n          placement={placement}\n          {...popperProps}\n        >\n          <FocusOn\n            scrollLock={false}\n            enabled={isOpen}\n            onEscapeKey={onClose}\n            onClickOutside={handleOnClickOutside}\n          >\n            {isOpen && (\n              <div className=\"pgn__modal-popup__tooltip\">\n                {children}\n                {hasArrow && (\n                  <div\n                    id=\"arrow\"\n                    data-testid=\"modal-popup-arrow\"\n                    className={`pgn__modal-popup__arrow pgn__modal-popup__arrow-${placement}`}\n                    data-popper-arrow=\"\"\n                  />\n                )}\n              </div>\n            )}\n          </FocusOn>\n        </PopperElement>\n      </RootComponent>\n    </ModalContextProvider>\n  );\n}\n\nModalPopup.propTypes = {\n  /** Specifies the contents of the modal */\n  children: PropTypes.node.isRequired,\n  /** A callback function for when the modal is dismissed */\n  onClose: PropTypes.func.isRequired,\n  /** Is the modal dialog open or closed */\n  isOpen: PropTypes.bool.isRequired,\n  /** Prevent clicking on the backdrop or pressing Esc to close the modal */\n  isBlocking: PropTypes.bool,\n  /** Insert modal into a different location in the DOM */\n  withPortal: PropTypes.bool,\n  // This type: https://stackoverflow.com/questions/48007326/what-is-the-correct-proptype-for-a-ref-in-react\n  /** Specifies an element near which the modal should be displayed */\n  positionRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.shape({}) }),\n  ]),\n  /** Specifies position according to the element that the ``positionRef`` prop points to */\n  placement: PopperElement.propTypes.placement,\n  /** Caret to the modal popup pointing to the target */\n  hasArrow: PropTypes.bool,\n};\n\nModalPopup.defaultProps = {\n  isBlocking: false,\n  withPortal: false,\n  placement: 'bottom-start',\n  positionRef: null,\n  hasArrow: false,\n};\n\nexport default ModalPopup;\n"],"mappings":"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","ignoreList":[]}