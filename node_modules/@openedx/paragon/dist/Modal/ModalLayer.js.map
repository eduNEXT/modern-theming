{"version":3,"file":"ModalLayer.js","names":["React","useEffect","classNames","PropTypes","FocusOn","Portal","ModalContextProvider","ModalBackdrop","_ref","onClick","createElement","className","onKeyDown","propTypes","func","ModalContentContainer","_ref2","children","node","ModalLayer","_ref3","onClose","isOpen","isBlocking","zIndex","document","body","classList","add","remove","handleClose","undefined","allowPinchZoom","scrollLock","enabled","onEscapeKey","onClickOutside","isRequired","bool","number"],"sources":["../../src/Modal/ModalLayer.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { FocusOn } from 'react-focus-on';\nimport Portal from './Portal';\nimport { ModalContextProvider } from './ModalContext';\n\n// istanbul ignore next\nfunction ModalBackdrop({ onClick }: { onClick?: () => void }) {\n  return (\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <div\n      className=\"pgn__modal-backdrop\"\n      onClick={onClick}\n      onKeyDown={onClick}\n      data-testid=\"modal-backdrop\"\n    />\n  );\n}\n\nModalBackdrop.propTypes = {\n  onClick: PropTypes.func,\n};\n\n// istanbul ignore next\nfunction ModalContentContainer({ children = null }: { children?: React.ReactNode }) {\n  return <div className=\"pgn__modal-content-container\">{children}</div>;\n}\n\nModalContentContainer.propTypes = {\n  children: PropTypes.node,\n};\n\ninterface Props {\n  /** Specifies the contents of the modal */\n  children: React.ReactNode;\n  /** A callback function for when the modal is dismissed */\n  onClose: () => void;\n  /** Is the modal dialog open or closed */\n  isOpen: boolean;\n  /** Prevent clicking on the backdrop or pressing Esc to close the modal */\n  isBlocking?: boolean;\n  /** Specifies the z-index of the modal */\n  zIndex?: number;\n}\n\n/**\n * The ModalLayer should be used for any component that wishes to engage the user\n * in a \"mode\" where a layer on top of the application is interactive while the\n * rest of the application is made non-interactive. The assumption made by this\n * component is that if a modal object is visible then it is \"enabled\"\n */\nfunction ModalLayer({\n  children, onClose, isOpen, isBlocking = false, zIndex,\n}: Props) {\n  useEffect(() => {\n    if (isOpen) {\n      document.body.classList.add('pgn__hidden-scroll-padding-right');\n    } else {\n      document.body.classList.remove('pgn__hidden-scroll-padding-right');\n    }\n    return () => {\n      document.body.classList.remove('pgn__hidden-scroll-padding-right');\n    };\n  }, [isOpen]);\n\n  if (!isOpen) {\n    return null;\n  }\n\n  const handleClose = isBlocking ? undefined : onClose;\n\n  return (\n    <ModalContextProvider onClose={onClose} isOpen={isOpen} isBlocking={isBlocking}>\n      <Portal>\n        <FocusOn\n          allowPinchZoom\n          scrollLock\n          enabled={isOpen}\n          onEscapeKey={handleClose}\n          onClickOutside={handleClose}\n          className={classNames(\n            'pgn__modal-layer',\n            zIndex ? `zindex-${zIndex}` : '',\n          )}\n        >\n          <ModalContentContainer>\n            <ModalBackdrop onClick={handleClose} />\n            {children}\n          </ModalContentContainer>\n        </FocusOn>\n      </Portal>\n    </ModalContextProvider>\n  );\n}\n\nModalLayer.propTypes = {\n  /** Specifies the contents of the modal */\n  children: PropTypes.node.isRequired,\n  /** A callback function for when the modal is dismissed */\n  onClose: PropTypes.func.isRequired,\n  /** Is the modal dialog open or closed */\n  isOpen: PropTypes.bool.isRequired,\n  /** Prevent clicking on the backdrop or pressing Esc to close the modal */\n  isBlocking: PropTypes.bool,\n  /** Specifies the z-index of the modal */\n  zIndex: PropTypes.number,\n};\n\nexport { ModalBackdrop, ModalContentContainer };\nexport default ModalLayer;\n"],"mappings":"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","ignoreList":[]}