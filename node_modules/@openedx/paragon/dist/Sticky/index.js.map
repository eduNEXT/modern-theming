{"version":3,"file":"index.js","names":["React","useLayoutEffect","useState","PropTypes","classNames","POSITION_VARIANTS","Sticky","forwardRef","_ref","ref","position","children","offset","className","rest","isSticky","setIsSticky","defaultRef","useRef","resolvedRef","current","stickyElement","elementStyles","window","getComputedStyle","elementOffset","elementWithOffset","parseInt","observer","IntersectionObserver","_ref2","entry","intersectionRatio","threshold","rootMargin","observe","unobserve","createElement","propTypes","node","isRequired","oneOf","oneOfType","number","string","defaultProps","undefined"],"sources":["../../src/Sticky/index.jsx"],"sourcesContent":["import React, { useLayoutEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst POSITION_VARIANTS = [\n  'top',\n  'bottom',\n];\n\nconst Sticky = React.forwardRef(({\n  position,\n  children,\n  offset,\n  className,\n  ...rest\n}, ref) => {\n  const [isSticky, setIsSticky] = useState(false);\n  const defaultRef = React.useRef();\n  const resolvedRef = ref || defaultRef;\n\n  // eslint-disable-next-line consistent-return\n  useLayoutEffect(() => {\n    if (resolvedRef.current) {\n      const stickyElement = resolvedRef.current;\n      // getComputedStyle is used to get real top/bottom\n      // values on the page for proper shadows display\n      const elementStyles = window.getComputedStyle(stickyElement);\n      const elementOffset = elementStyles[position || 'top'];\n      // Margin calculations according to the offset.\n      // 1 pixel above/bellow + offset pixels that determines\n      // when callback function is called\n      const elementWithOffset = 1 + (parseInt(elementOffset, 10) || 0);\n      const observer = new IntersectionObserver(\n        ([entry]) => setIsSticky(entry.intersectionRatio < 1),\n        {\n          threshold: [1],\n          rootMargin: position === 'bottom'\n            ? `0px 0px -${elementWithOffset}px 0px`\n            : `-${elementWithOffset}px 0px 0px 0px`,\n        },\n      );\n      observer.observe(stickyElement);\n\n      return () => {\n        observer.unobserve(stickyElement);\n      };\n    }\n  }, [position, resolvedRef]);\n\n  return (\n    <div\n      className={classNames(\n        'pgn__sticky',\n        `pgn__sticky-${position || 'top'}`,\n        offset ? `pgn__sticky-offset--${offset}` : '',\n        { 'pgn__sticky-shadow': isSticky },\n        className,\n      )}\n      ref={resolvedRef}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n});\n\nSticky.propTypes = {\n  /** Specifies content of the component. */\n  children: PropTypes.node.isRequired,\n  /** Specifies position of the element. */\n  position: PropTypes.oneOf(POSITION_VARIANTS),\n  /**\n   * Specifies offset from top/bottom depending on the `position` property.\n   *\n   * Valid values are based on `the spacing classes`:\n   * `0, 0.5, ... 6`.\n   */\n  offset: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /** Specifies an additional `className` to add to the base element. */\n  className: PropTypes.string,\n};\n\nSticky.defaultProps = {\n  position: 'top',\n  offset: undefined,\n  className: undefined,\n};\n\nexport default Sticky;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,eAAe,EAAEC,QAAQ,QAAQ,OAAO;AACxD,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,UAAU,MAAM,YAAY;AAEnC,MAAMC,iBAAiB,GAAG,CACxB,KAAK,EACL,QAAQ,CACT;AAED,MAAMC,MAAM,gBAAGN,KAAK,CAACO,UAAU,CAAC,CAAAC,IAAA,EAM7BC,GAAG,KAAK;EAAA,IANsB;IAC/BC,QAAQ;IACRC,QAAQ;IACRC,MAAM;IACNC,SAAS;IACT,GAAGC;EACL,CAAC,GAAAN,IAAA;EACC,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMe,UAAU,GAAGjB,KAAK,CAACkB,MAAM,CAAC,CAAC;EACjC,MAAMC,WAAW,GAAGV,GAAG,IAAIQ,UAAU;;EAErC;EACAhB,eAAe,CAAC,MAAM;IACpB,IAAIkB,WAAW,CAACC,OAAO,EAAE;MACvB,MAAMC,aAAa,GAAGF,WAAW,CAACC,OAAO;MACzC;MACA;MACA,MAAME,aAAa,GAAGC,MAAM,CAACC,gBAAgB,CAACH,aAAa,CAAC;MAC5D,MAAMI,aAAa,GAAGH,aAAa,CAACZ,QAAQ,IAAI,KAAK,CAAC;MACtD;MACA;MACA;MACA,MAAMgB,iBAAiB,GAAG,CAAC,IAAIC,QAAQ,CAACF,aAAa,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;MAChE,MAAMG,QAAQ,GAAG,IAAIC,oBAAoB,CACvCC,KAAA;QAAA,IAAC,CAACC,KAAK,CAAC,GAAAD,KAAA;QAAA,OAAKd,WAAW,CAACe,KAAK,CAACC,iBAAiB,GAAG,CAAC,CAAC;MAAA,GACrD;QACEC,SAAS,EAAE,CAAC,CAAC,CAAC;QACdC,UAAU,EAAExB,QAAQ,KAAK,QAAQ,GAC7B,YAAYgB,iBAAiB,QAAQ,GACrC,IAAIA,iBAAiB;MAC3B,CACF,CAAC;MACDE,QAAQ,CAACO,OAAO,CAACd,aAAa,CAAC;MAE/B,OAAO,MAAM;QACXO,QAAQ,CAACQ,SAAS,CAACf,aAAa,CAAC;MACnC,CAAC;IACH;EACF,CAAC,EAAE,CAACX,QAAQ,EAAES,WAAW,CAAC,CAAC;EAE3B,oBACEnB,KAAA,CAAAqC,aAAA;IACExB,SAAS,EAAET,UAAU,CACnB,aAAa,EACb,eAAeM,QAAQ,IAAI,KAAK,EAAE,EAClCE,MAAM,GAAG,uBAAuBA,MAAM,EAAE,GAAG,EAAE,EAC7C;MAAE,oBAAoB,EAAEG;IAAS,CAAC,EAClCF,SACF,CAAE;IACFJ,GAAG,EAAEU,WAAY;IAAA,GACbL;EAAI,GAEPH,QACE,CAAC;AAEV,CAAC,CAAC;AAEFL,MAAM,CAACgC,SAAS,GAAG;EACjB;EACA3B,QAAQ,EAAER,SAAS,CAACoC,IAAI,CAACC,UAAU;EACnC;EACA9B,QAAQ,EAAEP,SAAS,CAACsC,KAAK,CAACpC,iBAAiB,CAAC;EAC5C;AACF;AACA;AACA;AACA;AACA;EACEO,MAAM,EAAET,SAAS,CAACuC,SAAS,CAAC,CAACvC,SAAS,CAACwC,MAAM,EAAExC,SAAS,CAACyC,MAAM,CAAC,CAAC;EACjE;EACA/B,SAAS,EAAEV,SAAS,CAACyC;AACvB,CAAC;AAEDtC,MAAM,CAACuC,YAAY,GAAG;EACpBnC,QAAQ,EAAE,KAAK;EACfE,MAAM,EAAEkC,SAAS;EACjBjC,SAAS,EAAEiC;AACb,CAAC;AAED,eAAexC,MAAM","ignoreList":[]}