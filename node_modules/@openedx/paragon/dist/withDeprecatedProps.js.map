{"version":3,"file":"withDeprecatedProps.js","names":["React","DeprTypes","withDeprecatedProps","WrappedComponent","componentName","deprecatedProps","WithDeprecatedProps","Component","displayName","constructor","props","transformProps","bind","warn","message","process","env","NODE_ENV","console","acc","propName","undefined","deprType","newName","expect","transform","MOVED","REMOVED","FORMAT","MOVED_AND_FORMAT","render","children","transformedProps","Object","keys","reduce","createElement"],"sources":["../src/withDeprecatedProps.tsx"],"sourcesContent":["/* eslint no-console: 0 */\nimport React from 'react';\n\nexport enum DeprTypes {\n  MOVED = 'MOVED',\n  REMOVED = 'REMOVED',\n  FORMAT = 'FORMAT',\n  MOVED_AND_FORMAT = 'MOVED_AND_FORMAT',\n}\n\nexport interface DeprecatedProps extends Record<string, any> {\n  deprType: DeprTypes,\n  newName?: string,\n  expect?: (propValue: any) => boolean,\n  transform?: (propValue: any, allProps: Record<string, any>) => any,\n  message?: string,\n}\n\nfunction withDeprecatedProps<T extends Record<string, any>>(\n  WrappedComponent: React.ComponentType<any>,\n  componentName: string,\n  deprecatedProps: Record<string, DeprecatedProps>,\n) : any {\n  class WithDeprecatedProps extends React.Component<T> {\n    // eslint-disable-next-line react/static-property-placement\n    public static displayName = `withDeprecatedProps(${componentName})`;\n\n    constructor(props: T) {\n      super(props);\n      this.transformProps = this.transformProps.bind(this);\n    }\n\n    warn(message: string) {\n      if (process.env.NODE_ENV === 'development') {\n        if (console) { console.warn(`[Deprecated] ${message}`); }\n      }\n    }\n\n    transformProps(acc: Record<string, any>, propName: string) : Record<string, any> {\n      if (deprecatedProps[propName] === undefined) {\n        acc[propName] = this.props[propName];\n        return acc;\n      }\n\n      const {\n        deprType,\n        newName,\n        expect,\n        transform,\n        message,\n      } = deprecatedProps[propName];\n\n      switch (deprType) {\n        case DeprTypes.MOVED:\n          this.warn(`${componentName}: The prop '${propName}' has been moved to '${newName}'.`);\n          acc[newName!] = this.props[propName];\n          break;\n        case DeprTypes.REMOVED:\n          this.warn(`${componentName}: The prop '${propName}' has been removed. '${message}'`);\n          break;\n        case DeprTypes.FORMAT:\n          if (!expect!(this.props[propName])) {\n            this.warn(`${componentName}: The prop '${propName}' expects a new format. ${message}`);\n            acc[propName] = transform!(this.props[propName], this.props);\n          } else {\n            acc[propName] = this.props[propName];\n          }\n          break;\n        case DeprTypes.MOVED_AND_FORMAT:\n          this.warn(`${componentName}: The prop '${propName}' has been moved to '${newName}' and expects a new format. ${message}`);\n          acc[newName!] = transform!(this.props[propName], this.props);\n          break;\n        default:\n          acc[propName] = this.props[propName];\n          break;\n      }\n\n      return acc;\n    }\n\n    render() {\n      const { children, ...transformedProps } = Object\n        .keys(this.props)\n        .reduce(this.transformProps, {});\n\n      return (\n        <WrappedComponent {...transformedProps as T}>\n          {this.props.children || children}\n        </WrappedComponent>\n      );\n    }\n  }\n\n  return WithDeprecatedProps;\n}\n\nexport default withDeprecatedProps;\n"],"mappings":"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","ignoreList":[]}