{"version":3,"file":"CardImageCap.js","names":["React","useContext","useState","PropTypes","classNames","Skeleton","CardContext","cardSrcFallbackImg","SKELETON_HEIGHT_VALUE","LOGO_SKELETON_HEIGHT_VALUE","CardImageCap","forwardRef","_ref","ref","src","fallbackSrc","srcAlt","logoSrc","fallbackLogoSrc","logoAlt","skeletonHeight","skeletonWidth","logoSkeleton","logoSkeletonHeight","logoSkeletonWidth","className","imageLoadingType","orientation","isLoading","showImageCap","setShowImageCap","showLogoCap","setShowLogoCap","wrapperClassName","createElement","containerClassName","height","width","handleSrcFallback","event","altSrc","imageKey","currentTarget","endsWith","show","onError","onLoad","alt","loading","propTypes","string","number","bool","oneOf","defaultProps","undefined"],"sources":["../../src/Card/CardImageCap.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Skeleton from 'react-loading-skeleton';\nimport CardContext from './CardContext';\nimport { cardSrcFallbackImg } from './CardFallbackDefaultImage';\n\nconst SKELETON_HEIGHT_VALUE = 140;\nconst LOGO_SKELETON_HEIGHT_VALUE = 41;\n\nconst CardImageCap = React.forwardRef(({\n  src,\n  fallbackSrc,\n  srcAlt,\n  logoSrc,\n  fallbackLogoSrc,\n  logoAlt,\n  skeletonHeight,\n  skeletonWidth,\n  logoSkeleton,\n  logoSkeletonHeight,\n  logoSkeletonWidth,\n  className,\n  imageLoadingType,\n}, ref) => {\n  const { orientation, isLoading } = useContext(CardContext);\n  const [showImageCap, setShowImageCap] = useState(false);\n  const [showLogoCap, setShowLogoCap] = useState(false);\n\n  const wrapperClassName = `pgn__card-wrapper-image-cap ${orientation}`;\n\n  if (isLoading) {\n    return (\n      <div\n        className={classNames(wrapperClassName, className)}\n        data-testid=\"image-loader-wrapper\"\n      >\n        <Skeleton\n          containerClassName=\"pgn__card-image-cap-loader\"\n          height={orientation === 'horizontal' ? '100%' : skeletonHeight}\n          width={skeletonWidth}\n        />\n        {logoSkeleton && (\n          <Skeleton\n            containerClassName=\"pgn__card-logo-cap\"\n            height={logoSkeletonHeight}\n            width={logoSkeletonWidth}\n          />\n        )}\n      </div>\n    );\n  }\n\n  const handleSrcFallback = (event, altSrc, imageKey) => {\n    const { currentTarget } = event;\n\n    if (!altSrc || currentTarget.src.endsWith(altSrc)) {\n      if (imageKey === 'imageCap') {\n        currentTarget.src = cardSrcFallbackImg;\n      } else {\n        setShowLogoCap(false);\n      }\n\n      return;\n    }\n\n    currentTarget.src = altSrc;\n  };\n\n  return (\n    <div className={classNames(className, wrapperClassName)} ref={ref}>\n      {!!src && (\n        <img\n          className={classNames('pgn__card-image-cap', { show: showImageCap })}\n          src={src}\n          onError={(event) => handleSrcFallback(event, fallbackSrc, 'imageCap')}\n          onLoad={() => setShowImageCap(true)}\n          alt={srcAlt}\n          loading={imageLoadingType}\n        />\n      )}\n      {!!logoSrc && (\n        <img\n          className={classNames('pgn__card-logo-cap', { show: showLogoCap })}\n          src={logoSrc}\n          onError={(event) => handleSrcFallback(event, fallbackLogoSrc, 'logoCap')}\n          onLoad={() => setShowLogoCap(true)}\n          alt={logoAlt}\n          loading={imageLoadingType}\n        />\n      )}\n    </div>\n  );\n});\n\nCardImageCap.propTypes = {\n  /** Specifies class name to append to the base element. */\n  className: PropTypes.string,\n  /** Specifies image src. */\n  src: PropTypes.string,\n  /** Specifies fallback image src. */\n  fallbackSrc: PropTypes.string,\n  /** Specifies image alt text. */\n  srcAlt: PropTypes.string,\n  /** Specifies logo src to put on top of the image. */\n  logoSrc: PropTypes.string,\n  /** Specifies fallback image logo src. */\n  fallbackLogoSrc: PropTypes.string,\n  /** Specifies logo image alt text. */\n  logoAlt: PropTypes.string,\n  /** Specifies height of Image skeleton in loading state. */\n  skeletonHeight: PropTypes.number,\n  /** Specifies width of Image skeleton in loading state. */\n  skeletonWidth: PropTypes.number,\n  /** Specifies whether the cap should be displayed during loading. */\n  logoSkeleton: PropTypes.bool,\n  /** Specifies height of Logo skeleton in loading state. */\n  logoSkeletonHeight: PropTypes.number,\n  /** Specifies width of Logo skeleton in loading state. */\n  logoSkeletonWidth: PropTypes.number,\n  /** Specifies loading type for images */\n  imageLoadingType: PropTypes.oneOf(['eager', 'lazy']),\n};\n\nCardImageCap.defaultProps = {\n  src: undefined,\n  fallbackSrc: cardSrcFallbackImg,\n  logoSrc: undefined,\n  fallbackLogoSrc: undefined,\n  className: undefined,\n  srcAlt: undefined,\n  logoAlt: undefined,\n  skeletonHeight: SKELETON_HEIGHT_VALUE,\n  logoSkeleton: false,\n  logoSkeletonHeight: LOGO_SKELETON_HEIGHT_VALUE,\n  skeletonWidth: undefined,\n  logoSkeletonWidth: undefined,\n  imageLoadingType: 'eager',\n};\n\nexport default CardImageCap;\n"],"mappings":"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","ignoreList":[]}